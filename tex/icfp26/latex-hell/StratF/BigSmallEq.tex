\begin{code}[hide]%
\>[0]\AgdaComment{--\ This\ file\ proves\ that\ a\ big\ step\ reduction\ implies\ a\ multi-small-step\ reduction\ to\ a\ value.}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{StratF.BigSmallEq}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.List}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{List}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{}∷\AgdaUnderscore{}}}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.Nat}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{ℕ}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{zero}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{suc}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.Product}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}×\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaRecord{Σ}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{Σ-syntax}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{∃-syntax}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{},\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{proj₁}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{proj₂}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Evaluation}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.ExprSubstitution}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Expressions}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.BigStep}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.SmallStep}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Types}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ Congruency\ rules\ lifted\ over\ multi-step\ evaluation}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{`ξ-suc}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{—↠}}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaInductiveConstructor{`suc}\AgdaSpace{}%
\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{—↠}}\AgdaSpace{}%
\AgdaInductiveConstructor{`suc}\AgdaSpace{}%
\AgdaGeneralizable{e}\<%
\\
\>[0]\AgdaFunction{`ξ-suc}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}%
\>[29]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}\<%
\\
\>[0]\AgdaFunction{`ξ-suc}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSpace{}%
\AgdaBound{e₂—↠e}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{ξ-suc}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{`ξ-suc}\AgdaSpace{}%
\AgdaBound{e₂—↠e}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{`ξ-∙}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{—↠}}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∙}}\AgdaSpace{}%
\AgdaGeneralizable{T′}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{—↠}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∙}}\AgdaSpace{}%
\AgdaGeneralizable{T′}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{`ξ-∙}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}%
\>[27]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}\<%
\\
\>[0]\AgdaFunction{`ξ-∙}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSpace{}%
\AgdaBound{e₂—↠e}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{ξ-∙}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{`ξ-∙}\AgdaSpace{}%
\AgdaBound{e₂—↠e}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{`β-Λ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{—↠}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{Λ}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{⇒}}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∙}}\AgdaSpace{}%
\AgdaGeneralizable{T}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{—↠}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{[}}\AgdaSpace{}%
\AgdaGeneralizable{T}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{]ET}}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{`β-Λ}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}%
\>[28]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaInductiveConstructor{β-Λ}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}\<%
\\
\>[0]\AgdaFunction{`β-Λ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSpace{}%
\AgdaBound{e₂—↠Λe}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{ξ-∙}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{`β-Λ}\AgdaSpace{}%
\AgdaBound{e₂—↠Λe}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{`ξ-·₁}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{—↠}}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{·}}\AgdaSpace{}%
\AgdaGeneralizable{e₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{—↠}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{·}}\AgdaSpace{}%
\AgdaGeneralizable{e₂}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{`ξ-·₁}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}%
\>[28]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}\<%
\\
\>[0]\AgdaFunction{`ξ-·₁}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSpace{}%
\AgdaBound{e₂—↠e}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{ξ-·₁}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{`ξ-·₁}\AgdaSpace{}%
\AgdaBound{e₂—↠e}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{`ξ-·₂}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{e₂}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{—↠}}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaDatatype{isValue}\AgdaSpace{}%
\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{·}}\AgdaSpace{}%
\AgdaGeneralizable{e₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{—↠}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{·}}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{`ξ-·₂}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}%
\>[23]\AgdaBound{isV}%
\>[32]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}\<%
\\
\>[0]\AgdaFunction{`ξ-·₂}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaBound{e₁↪e}\AgdaSpace{}%
\AgdaBound{e₂—↠e₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{isV}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{ξ-·₂}\AgdaSpace{}%
\AgdaBound{e₁↪e}\AgdaSpace{}%
\AgdaBound{isV}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{`ξ-·₂}\AgdaSpace{}%
\AgdaBound{e₂—↠e₁}\AgdaSpace{}%
\AgdaBound{isV}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ Big-Step\ API}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{infix}\AgdaSpace{}%
\AgdaNumber{15}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}↓\AgdaUnderscore{}}}\<%
\end{code} 
\newcommand*\SmallStepBigAPI{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}↓\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{T}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Type}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{CExpr}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaRecord{CValue}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaPrimitive{Set}\<%
\\
\>[0]\AgdaBound{e}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaBound{v}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{e}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{—↠}}\AgdaSpace{}%
\AgdaField{exp}\AgdaSpace{}%
\AgdaBound{v}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\newcommand*\SmallStepBigAPIFunctions{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{↓-n}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\#}}\AgdaSpace{}%
\AgdaGeneralizable{n}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{\#}}\AgdaSpace{}%
\AgdaGeneralizable{n}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{V-♯}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{↓-s}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{\#}}\AgdaSpace{}%
\AgdaGeneralizable{n}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{V-♯}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaInductiveConstructor{`suc}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{\#}}\AgdaSpace{}%
\AgdaInductiveConstructor{suc}\AgdaSpace{}%
\AgdaGeneralizable{n}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{V-♯}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{↓-ƛ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{ƛ}}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{ƛ}}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{V-ƛ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{↓-·}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{ƛ}}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{V-ƛ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaGeneralizable{e₂}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaGeneralizable{v₂}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{[}}\AgdaSpace{}%
\AgdaField{exp}\AgdaSpace{}%
\AgdaGeneralizable{v₂}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{]E}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaGeneralizable{v}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{·}}\AgdaSpace{}%
\AgdaGeneralizable{e₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaGeneralizable{v}\<%
\\
\>[0]\AgdaFunction{↓-Λ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{Λ}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{⇒}}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{Λ}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{⇒}}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{V-Λ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{↓-∙}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{Λ}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{⇒}}\AgdaSpace{}%
\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{V-Λ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{[}}\AgdaSpace{}%
\AgdaGeneralizable{T}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{]ET}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaGeneralizable{v}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∙}}\AgdaSpace{}%
\AgdaGeneralizable{T}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaGeneralizable{v}\<%
\\
\>[0]\AgdaFunction{Value-↓}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{T}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Type}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{v}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{CValue}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaField{exp}\AgdaSpace{}%
\AgdaBound{v}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{↓}}\AgdaSpace{}%
\AgdaBound{v}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\newcommand*\SmallStepBigN{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{↓-n}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\newcommand*\SmallStepBigS{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{↓-s}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaInductiveConstructor{β-suc}%
\>[29]\AgdaInductiveConstructor{—↠-refl}\<%
\\
\>[0]\AgdaFunction{↓-s}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSpace{}%
\AgdaBound{e↓n}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{ξ-suc}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{↓-s}\AgdaSpace{}%
\AgdaBound{e↓n}\AgdaSymbol{)}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\newcommand*\SmallStepBigLam{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{↓-ƛ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\newcommand*\SmallStepBigApp{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{↓-·}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{v₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{v₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{e₁↓ƛe}\AgdaSpace{}%
\AgdaBound{e₂↓v₂}\AgdaSpace{}%
\AgdaBound{e[v₂]↓v}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{—↠-trans}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{`ξ-·₁}\AgdaSpace{}%
\AgdaBound{e₁↓ƛe}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{—↠-trans}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{`ξ-·₂}\AgdaSpace{}%
\AgdaBound{e₂↓v₂}\AgdaSpace{}%
\AgdaInductiveConstructor{V-ƛ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{—↠-step}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{β-ƛ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaField{prf}\AgdaSpace{}%
\AgdaBound{v₂}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaBound{e[v₂]↓v}\AgdaSymbol{))}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\newcommand*\SmallStepBigLAM{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{↓-Λ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{—↠-refl}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\newcommand*\SmallStepBigAPP{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{↓-∙}\AgdaSpace{}%
\AgdaBound{e₁↓Λe}\AgdaSpace{}%
\AgdaBound{e₂[T]↓v}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{—↠-trans}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{`β-Λ}\AgdaSpace{}%
\AgdaBound{e₁↓Λe}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{e₂[T]↓v}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\newcommand*\SmallStepValueReduceSelf{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{Value-↓}\AgdaSpace{}%
\AgdaSymbol{((}\AgdaOperator{\AgdaInductiveConstructor{\#}}\AgdaSpace{}%
\AgdaBound{n}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{V-♯}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-n}\<%
\\
\>[0]\AgdaFunction{Value-↓}\AgdaSpace{}%
\AgdaSymbol{((}\AgdaOperator{\AgdaInductiveConstructor{ƛ}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{})}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{V-ƛ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-ƛ}\<%
\\
\>[0]\AgdaFunction{Value-↓}\AgdaSpace{}%
\AgdaSymbol{((}\AgdaOperator{\AgdaInductiveConstructor{Λ}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{⇒}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{})}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{V-Λ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-Λ}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\begin{code}[hide]%
\>[0]\AgdaComment{----------------------------------------------------------------------}\<%
\\
\>[0]\<%
\end{code} 
\newcommand*\SmallStepBigToSmall{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{⇓to—↠}\AgdaSpace{}%
\AgdaSymbol{:}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{⇓}}\AgdaSpace{}%
\AgdaGeneralizable{v}\AgdaSpace{}%
\AgdaSymbol{→}\<%
\\
%
\>[2]\AgdaGeneralizable{e}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{—↠}}\AgdaSpace{}%
\AgdaField{exp}\AgdaSpace{}%
\AgdaGeneralizable{v}\<%
\\
\>[0]\AgdaFunction{⇓to—↠}\AgdaSpace{}%
\AgdaInductiveConstructor{⇓-n}%
\>[17]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-n}\<%
\\
\>[0]\AgdaFunction{⇓to—↠}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{⇓-s}\AgdaSpace{}%
\AgdaBound{e⇓\#n}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-s}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{⇓to—↠}\AgdaSpace{}%
\AgdaBound{e⇓\#n}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{⇓to—↠}\AgdaSpace{}%
\AgdaInductiveConstructor{⇓-ƛ}%
\>[17]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-ƛ}\<%
\\
\>[0]\AgdaFunction{⇓to—↠}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{⇓-·}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{v₂}\AgdaSpace{}%
\AgdaSymbol{=}%
\>[377I]\AgdaBound{v₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{v}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{v}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{e₁⇓ƛe}\AgdaSpace{}%
\AgdaBound{e₂⇓v'}\AgdaSpace{}%
\AgdaBound{e[e₂]⇓v}\AgdaSymbol{)}\<%
\\
\>[377I][@{}l@{\AgdaIndent{0}}]%
\>[18]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-·}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{v₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{v₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{v}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{v}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{⇓to—↠}\AgdaSpace{}%
\AgdaBound{e₁⇓ƛe}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{⇓to—↠}%
\>[64]\AgdaBound{e₂⇓v'}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{⇓to—↠}\AgdaSpace{}%
\AgdaBound{e[e₂]⇓v}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{⇓to—↠}\AgdaSpace{}%
\AgdaInductiveConstructor{⇓-Λ}%
\>[17]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-Λ}\<%
\\
\>[0]\AgdaFunction{⇓to—↠}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{⇓-∙}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{v}\AgdaSpace{}%
\AgdaSymbol{=}%
\>[401I]\AgdaBound{v}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{e₁⇓Λe}\AgdaSpace{}%
\AgdaBound{e₂[T]⇓v}\AgdaSymbol{)}\<%
\\
\>[401I][@{}l@{\AgdaIndent{0}}]%
\>[18]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-∙}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{v}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{v}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{⇓to—↠}\AgdaSpace{}%
\AgdaBound{e₁⇓Λe}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{⇓to—↠}\AgdaSpace{}%
\AgdaBound{e₂[T]⇓v}\AgdaSymbol{)}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}


\begin{code}[hide]%
\>[0]\AgdaComment{----------------------------------------------------------------------}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{evalSmall}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{Eval}\<%
\\
\>[0]\AgdaFunction{evalSmall}\AgdaSpace{}%
\AgdaSymbol{=}%
\>[415I]\AgdaKeyword{record}\<%
\\
\>[.][@{}l@{}]\<[415I]%
\>[12]\AgdaSymbol{\{}\AgdaSpace{}%
\AgdaOperator{\AgdaField{\AgdaUnderscore{}↓\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}↓\AgdaUnderscore{}}}\<%
\\
%
\>[12]\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{↓-n}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-n}\<%
\\
%
\>[12]\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{↓-s}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-s}\<%
\\
%
\>[12]\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{↓-ƛ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-ƛ}\<%
\\
%
\>[12]\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{↓-·}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{λ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{v₂}\AgdaSymbol{\}\{}\AgdaBound{v}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{↓-·}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{v₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{v₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{v}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{v}\AgdaSymbol{\}}\<%
\\
%
\>[12]\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{↓-Λ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{↓-Λ}\<%
\\
%
\>[12]\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{↓-∙}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{λ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{\AgdaUnderscore{}}\AgdaSymbol{\}\{}\AgdaBound{v}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{↓-∙}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{v}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{v}\AgdaSymbol{\}}\<%
\\
%
\>[12]\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{Value-↓}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{Value-↓}\<%
\\
%
\>[12]\AgdaSymbol{\}}\<%
\end{code}

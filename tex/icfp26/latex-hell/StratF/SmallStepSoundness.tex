\begin{code}[hide]%
\>[0]\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{StratF.SmallStepSoundness}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.List}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{List}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{}∷\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{[\AgdaUnderscore{}]}}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.Nat}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{ℕ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Relation.Binary.PropositionalEquality}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaKeyword{using}%
\>[15I]\AgdaSymbol{(}\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}≡\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}≢\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{sym}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{trans}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{cong₂}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{dcong}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{dcong₂}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{subst}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{subst₂}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{resp₂}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{cong-app}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{icong}\AgdaSymbol{;}\<%
\\
\>[.][@{}l@{}]\<[15I]%
\>[8]\AgdaFunction{subst-∘}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{subst-subst}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{subst-sym-subst}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{sym-cong}\AgdaSymbol{;}\<%
\\
%
\>[8]\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{≡-Reasoning}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaModule{≡-Reasoning}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.ExprSubstFusion}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.ExprSubstPropertiesSem}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.ExprSubstitution}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Expressions}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.SmallStep}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.TypeSubstProperties}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.TypeSubstPropertiesSem}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.TypeSubstitution}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Types}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Util.Extensionality}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Util.HeterogeneousSetOmegaEquality}\AgdaSpace{}%
\AgdaSymbol{as}\AgdaSpace{}%
\AgdaModule{Hω}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}≅ω\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Util.PropositionalSetOmegaEquality}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Util.SubstProperties}\<%
\\
\>[0]\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Util.HeterogeneousEqualityLemmas}\AgdaSpace{}%
\AgdaSymbol{as}\AgdaSpace{}%
\AgdaModule{HE}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\<%
\end{code} 
\newcommand*\SmallStepSoundness{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{e₁}\AgdaSpace{}%
\AgdaBound{e₂}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Expr}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSpace{}%
\AgdaGeneralizable{Γ}\AgdaSpace{}%
\AgdaGeneralizable{T}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{→}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaBound{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{↪}}\AgdaSpace{}%
\AgdaBound{e₂}\AgdaSpace{}%
\AgdaSymbol{→}\<%
\\
%
\>[2]\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{E⟦}}\AgdaSpace{}%
\AgdaBound{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{E⟦}}\AgdaSpace{}%
\AgdaBound{e₂}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\newcommand*\SmallStepSoundnessProofExcerpt{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{ξ-∙}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{T′}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{T}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaKeyword{rewrite}\AgdaSpace{}%
\AgdaFunction{Tsingle-subst-preserves}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{cong-app}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaBound{η}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{β-Λ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{T}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{e}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{e}\AgdaSymbol{\})}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{sym}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{ETsingle-subst-preserves}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSpace{}%
\AgdaBound{e}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaComment{--\ ...}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\begin{code}[hide]%
\>[0]\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaInductiveConstructor{β-suc}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{ξ-suc}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaInductiveConstructor{ℕ.suc}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaBound{e₁↪e₂}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{β-ƛ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{e₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{e₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{e₁}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{e₁}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{v₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{sym}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{EEsingle-subst-preserves}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSpace{}%
\AgdaBound{e₁}\AgdaSpace{}%
\AgdaBound{e₂}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{ξ-·₁}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{e₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{e₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{e₁↪e}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{cong-app}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaBound{e₁↪e}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{E⟦}}\AgdaSpace{}%
\AgdaBound{e₂}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{ξ-·₂}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{e₁}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{e₁}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{e₂↪e}\AgdaSpace{}%
\AgdaBound{v₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{E⟦}}\AgdaSpace{}%
\AgdaBound{e₁}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaBound{e₂↪e}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{γ}\AgdaSymbol{)}\<%
\end{code}

\begin{code}[hide]%
\>[0]\AgdaComment{--\ This\ file\ contains\ definitions\ and\ lemmas\ about\ semantic\ renamings}\<%
\\
\>[0]\AgdaComment{--\ and\ substitutions\ of\ types.}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{StratF.TypeSubstPropertiesSem}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Level}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.List}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{List}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{}∷\AgdaUnderscore{}}}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Relation.Binary.PropositionalEquality}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}≡\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}≢\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{sym}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{trans}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{cong₂}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{subst}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{subst₂}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{resp₂}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{cong-app}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{icong}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{≡-Reasoning}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaModule{≡-Reasoning}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Types}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.TypeSubstitution}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.TypeSubstProperties}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Util.Extensionality}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StratF.Util.PropositionalSetOmegaEquality}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{private}\AgdaSpace{}%
\AgdaKeyword{variable}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaGeneralizable{ρ}\AgdaSpace{}%
\AgdaGeneralizable{ρ₁}\AgdaSpace{}%
\AgdaGeneralizable{ρ₂}\AgdaSpace{}%
\AgdaGeneralizable{ρ′}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\<%
\\
%
\>[2]\AgdaGeneralizable{σ}\AgdaSpace{}%
\AgdaGeneralizable{σ₁}\AgdaSpace{}%
\AgdaGeneralizable{σ₂}\AgdaSpace{}%
\AgdaGeneralizable{σ′}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ the\ action\ of\ renaming\ on\ semantic\ environments}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{TRen*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TRen}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{η₁}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaPrimitive{Setω}\<%
\\
\>[0]\AgdaFunction{TRen*}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{Δ₁}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{l}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPostulate{Level}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{∈}}\AgdaSpace{}%
\AgdaBound{Δ₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{apply-env}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaFunction{apply-env}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSpace{}%
\AgdaBound{x}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{wkᵣ∈Ren*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{η}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{⟦α⟧}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Set}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{TRen*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Twkᵣ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{Δ₁}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSymbol{\}\{}\AgdaArgument{l}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaFunction{Tidᵣ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{⟦α⟧}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{η}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{wkᵣ∈Ren*}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{⟦α⟧}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{Tren*-id}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{η}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{TRen*}\AgdaSpace{}%
\AgdaFunction{Tidᵣ}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{η}\<%
\\
\>[0]\AgdaFunction{Tren*-id}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{Tren*-pop}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TRen}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{α}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Set}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{η₁}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{TRen*}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{α}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{TRen*}\AgdaSpace{}%
\AgdaSymbol{(λ}\AgdaSpace{}%
\AgdaBound{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{there}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSpace{}%
\AgdaBound{η₂}\<%
\\
\>[0]\AgdaFunction{Tren*-pop}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaBound{α}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{there}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{Tren*-lift}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TRen}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{\}\{}\AgdaBound{η₁}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSymbol{\}\{}\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{α}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Set}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{TRen*}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{TRen*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tliftᵣ}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{})}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{α}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{α}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{Tren*-lift}\AgdaSpace{}%
\AgdaBound{α}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaInductiveConstructor{here}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{Tren*-lift}\AgdaSpace{}%
\AgdaBound{α}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{there}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaBound{x}\<%
\\
\>[0]\<%
\end{code} 
\newcommand*\TFRenPreservesSemanticsType{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{Tren*-preserves-semantics}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TRen*}\AgdaSpace{}%
\AgdaGeneralizable{ρ*}\AgdaSpace{}%
\AgdaGeneralizable{η₁}\AgdaSpace{}%
\AgdaGeneralizable{η₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{(}\AgdaBound{T}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Type}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaFunction{Tren}\AgdaSpace{}%
\AgdaGeneralizable{ρ*}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaGeneralizable{η₂}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaGeneralizable{η₁}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\begin{code}[hide]%
\>[0]\AgdaFunction{Tren*-preserves-semantics}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{ρ*}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{η₁}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{`}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaBound{x}\<%
\\
\>[0]\AgdaFunction{Tren*-preserves-semantics}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{ρ*}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{η₁}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{T₁}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{⇒}}\AgdaSpace{}%
\AgdaBound{T₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{cong₂}\AgdaSpace{}%
\AgdaSymbol{(λ}\AgdaSpace{}%
\AgdaBound{A₁}\AgdaSpace{}%
\AgdaBound{A₂}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaBound{A₁}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaBound{A₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tren*-preserves-semantics}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{ρ*}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{η₁}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaBound{T₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tren*-preserves-semantics}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{ρ*}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{η₁}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaBound{T₂}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{Tren*-preserves-semantics}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{ρ*}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{η₁}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{`∀α}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{dep-ext}\AgdaSpace{}%
\AgdaSymbol{λ}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaBound{α}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{Tren*-preserves-semantics}\AgdaSymbol{\{}\AgdaArgument{ρ*}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{Tliftᵣ}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}\}\{}\AgdaBound{α}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSymbol{\}\{}\AgdaBound{α}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tren*-lift}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{ρ*}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{α}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{T}\<%
\\
\>[0]\AgdaFunction{Tren*-preserves-semantics}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaInductiveConstructor{`ℕ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ special\ case\ of\ composition\ sub\ o\ ren}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{sublemma-ext}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Textₛ}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaGeneralizable{T}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tliftₛ}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{∘ₛₛ}}\AgdaSpace{}%
\AgdaFunction{Textₛ}\AgdaSpace{}%
\AgdaFunction{Tidₛ}\AgdaSpace{}%
\AgdaGeneralizable{T}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaBound{x}\<%
\\
\>[0]\AgdaFunction{sublemma-ext}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaInductiveConstructor{here}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{sublemma-ext}\AgdaSymbol{\{}\AgdaArgument{T}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{there}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{trans}%
\>[371I]\AgdaSymbol{(}\AgdaFunction{sym}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{TidₛT≡T}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)))}\<%
\\
\>[.][@{}l@{}]\<[371I]%
\>[8]\AgdaSymbol{(}\AgdaFunction{sym}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{fusion-Tsub-Tren}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Twkᵣ}\AgdaSpace{}%
\AgdaFunction{Tidᵣ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Textₛ}\AgdaSpace{}%
\AgdaFunction{Tidₛ}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{)))}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{sublemma}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Textₛ}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaGeneralizable{T}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaFunction{Tliftₛ}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{∘ₛₛ}}\AgdaSpace{}%
\AgdaFunction{Textₛ}\AgdaSpace{}%
\AgdaFunction{Tidₛ}\AgdaSpace{}%
\AgdaGeneralizable{T}\<%
\\
\>[0]\AgdaFunction{sublemma}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{T}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{fun-ext₂}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{sublemma-ext}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{lemma2}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{T}%
\>[31]\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Type}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaGeneralizable{l′}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{T′}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Type}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{Tsub}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tliftₛ}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{[}}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{]T}}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaFunction{Tsub}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Textₛ}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{T}\<%
\\
\>[0]\AgdaFunction{lemma2}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{begin}}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{Tsub}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Textₛ}\AgdaSpace{}%
\AgdaFunction{Tidₛ}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tsub}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tliftₛ}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{})}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{)}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{≡⟨}\AgdaSpace{}%
\AgdaFunction{fusion-Tsub-Tsub}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tliftₛ}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{})}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Textₛ}\AgdaSpace{}%
\AgdaFunction{Tidₛ}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{⟩}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{Tsub}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tliftₛ}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{∘ₛₛ}}\AgdaSpace{}%
\AgdaFunction{Textₛ}\AgdaSpace{}%
\AgdaFunction{Tidₛ}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{T}\<%
\\
%
\>[2]\AgdaFunction{≡⟨}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaSymbol{(λ}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{Tsub}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{sym}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{sublemma}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaFunction{⟩}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{Tsub}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Textₛ}\AgdaSpace{}%
\AgdaBound{σ}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{T}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{∎}}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{Tdrop-σ≡Twk∘σ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{Tdropₛ}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaFunction{Twkᵣ}\AgdaSpace{}%
\AgdaFunction{Tidᵣ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{∘ᵣₛ}}\AgdaSpace{}%
\AgdaBound{σ*}\<%
\\
\>[0]\AgdaFunction{Tdrop-σ≡Twk∘σ}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{fun-ext₂}\AgdaSpace{}%
\AgdaSymbol{(λ}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ the\ action\ of\ substitution\ on\ semantic\ environments}\<%
\\
\>[0]\<%
\end{code} 
\newcommand*\TFsubstToEnv{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaOperator{\AgdaFunction{⟦\AgdaUnderscore{}⟧*}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\<%
\\
\>[0]\AgdaOperator{\AgdaFunction{⟦\AgdaUnderscore{}⟧*}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{Δ₁}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{\}}%
\>[19]\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\<%
\\
\>[0]\AgdaOperator{\AgdaFunction{⟦\AgdaUnderscore{}⟧*}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{Δ₁}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}\}}%
\>[19]\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaInductiveConstructor{here}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaFunction{Tdropₛ}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧*}}\AgdaSpace{}%
\AgdaBound{η₂}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\begin{code}[hide]%
\>[0]\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\<%
\\
\>[0]\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦\AgdaUnderscore{}⟧*}}\<%
\\
\>[0]\<%
\end{code} 
\newcommand*\TFsubstVarPreservesType{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{subst-var-preserves}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{α}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{∈}}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{τ*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{(}\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{lookup}\AgdaSpace{}%
\AgdaBound{α}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{τ*}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧*}}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{τ*}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaBound{α}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaBound{η₂}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\begin{code}[hide]%
\>[0]\AgdaFunction{subst-var-preserves}\AgdaSpace{}%
\AgdaInductiveConstructor{here}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{subst-var-preserves}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{there}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{subst-var-preserves}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tdropₛ}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{η₂}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{subst-to-env*-wk}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ*}%
\>[24]\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{α}%
\>[44]\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Set}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Twkₛ}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{α}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡ω}}\AgdaSpace{}%
\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{η₂}\<%
\\
\>[0]\AgdaFunction{subst-to-env*-wk}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{Δ₁}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{α}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{subst-to-env*-wk}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{Δ₁}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{Δ₁}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{α}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{=}%
\>[645I]\AgdaFunction{transω}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{conglω}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{}∷}}\AgdaSpace{}%
\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tdropₛ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Twkₛ}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{α}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tren*-preserves-semantics}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{ρ*}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{Twkᵣ}\AgdaSpace{}%
\AgdaFunction{Tidᵣ}\AgdaSymbol{\}\{}\AgdaBound{η₂}\AgdaSymbol{\}\{}\AgdaBound{α}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{wkᵣ∈Ren*}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaBound{α}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaInductiveConstructor{here}\AgdaSymbol{)))}\<%
\\
\>[645I][@{}l@{\AgdaIndent{0}}]%
\>[47]\AgdaSymbol{(}\AgdaFunction{congωω}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaInductiveConstructor{here}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷\AgdaUnderscore{}}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-to-env*-wk}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tdropₛ}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{α}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{))}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{subst-to-env*-build}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TRen}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{η₁}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{TRen*}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSpace{}%
\AgdaBound{η₂}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaSymbol{(λ}\AgdaSpace{}%
\AgdaBound{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{`}}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡ω}}\AgdaSpace{}%
\AgdaBound{η₁}\<%
\\
\>[0]\AgdaFunction{subst-to-env*-build}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{subst-to-env*-build}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{Δ₁}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{Δ₁}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{α}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{transω}%
\>[730I]\AgdaSymbol{(}\AgdaFunction{congωω}\AgdaSpace{}%
\AgdaSymbol{(λ}\AgdaSpace{}%
\AgdaBound{H}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{apply-env}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaInductiveConstructor{here}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{H}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-to-env*-build}\AgdaSpace{}%
\AgdaSymbol{(λ}\AgdaSpace{}%
\AgdaBound{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{there}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tren*-pop}\AgdaSpace{}%
\AgdaBound{ρ*}\AgdaSpace{}%
\AgdaBound{α}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaBound{Tren*}\AgdaSymbol{)))}\<%
\\
\>[.][@{}l@{}]\<[730I]%
\>[9]\AgdaSymbol{(}\AgdaFunction{conglω}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{}∷}}\AgdaSpace{}%
\AgdaBound{η₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Tren*}\AgdaSpace{}%
\AgdaInductiveConstructor{here}\AgdaSymbol{))}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{subst-to-env*-id}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{η}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaFunction{Tidₛ}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡ω}}\AgdaSpace{}%
\AgdaBound{η}\<%
\\
\>[0]\AgdaFunction{subst-to-env*-id}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{Δ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{Δ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{subst-to-env*-build}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{Δ₁}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{Δ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(λ}\AgdaSpace{}%
\AgdaBound{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tren*-id}\AgdaSpace{}%
\AgdaBound{η}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{subst-preserves-type}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Setω}\<%
\\
\>[0]\AgdaFunction{subst-preserves-type}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{Δ₁}\AgdaSpace{}%
\AgdaBound{Δ₂}\AgdaSymbol{\}\{}\AgdaBound{l}\AgdaSymbol{\}\{}\AgdaBound{η₂}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaBound{Δ₂}\AgdaSymbol{\}}\<%
\\
%
\>[2]\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaBound{Δ₁}\AgdaSpace{}%
\AgdaBound{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{T}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Type}\AgdaSpace{}%
\AgdaBound{Δ₁}\AgdaSpace{}%
\AgdaBound{l}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaSymbol{→}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaFunction{Tsub}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{subst-preserves}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{subst-preserves-type}\<%
\\
\>[0]\AgdaFunction{subst-preserves}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{η₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{`}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{sym}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-var-preserves}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{subst-preserves}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{η₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{T₁}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{⇒}}\AgdaSpace{}%
\AgdaBound{T₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{cong₂}\AgdaSpace{}%
\AgdaSymbol{(λ}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaBound{B}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-preserves}\AgdaSymbol{\{}\AgdaArgument{η₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{T₁}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-preserves}\AgdaSymbol{\{}\AgdaArgument{η₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{T₂}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{subst-preserves}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{η₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{`∀α}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{dep-ext}\AgdaSpace{}%
\AgdaSymbol{(λ}\AgdaSpace{}%
\AgdaBound{⟦α⟧}\AgdaSpace{}%
\AgdaSymbol{→}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{trans}%
\>[872I]\AgdaSymbol{(}\AgdaFunction{subst-preserves}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{η₂}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{⟦α⟧}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tliftₛ}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{})}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{)}\<%
\\
\>[.][@{}l@{}]\<[872I]%
\>[10]\AgdaSymbol{(}\AgdaFunction{congωl}\AgdaSpace{}%
\AgdaSymbol{(λ}\AgdaSpace{}%
\AgdaBound{H}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{⟦α⟧}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{H}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-to-env*-wk}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{⟦α⟧}\AgdaSpace{}%
\AgdaBound{η₂}\AgdaSymbol{)))}\<%
\\
\>[0]\AgdaFunction{subst-preserves}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaInductiveConstructor{`ℕ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\<%
\end{code} 
\newcommand*\TFSingleSubstPreserves{\begin{AgdaAlign}\begin{AgdaSuppressSpace}\begin{code}%
\>[0]\AgdaFunction{Tsingle-subst-preserves}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{η}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{T′}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Type}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{(}\AgdaBound{T}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Type}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaGeneralizable{l′}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{[}}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{]T}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{η}\AgdaSymbol{)}\<%
\end{code}\end{AgdaSuppressSpace}\end{AgdaAlign}}

\begin{code}[hide]%
\>[0]\AgdaFunction{Tsingle-subst-preserves}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{Δ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{Δ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{l}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{l}\AgdaSymbol{\}\{}\AgdaArgument{l′}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{l′}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{trans}%
\>[946I]\AgdaSymbol{(}\AgdaFunction{subst-preserves}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Textₛ}\AgdaSpace{}%
\AgdaFunction{Tidₛ}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{T}\AgdaSymbol{)}\<%
\\
\>[.][@{}l@{}]\<[946I]%
\>[8]\AgdaSymbol{(}\AgdaFunction{congωl}\AgdaSpace{}%
\AgdaSymbol{(λ}\AgdaSpace{}%
\AgdaBound{H}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{T}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{T′}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{H}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-to-env*-id}\AgdaSpace{}%
\AgdaBound{η}\AgdaSymbol{))}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{subst-to-env*-comp}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{τ*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSpace{}%
\AgdaGeneralizable{Δ₃}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{η}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Env*}\AgdaSpace{}%
\AgdaGeneralizable{Δ₃}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaBound{τ*}\AgdaSpace{}%
\AgdaBound{η}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡ω}}\AgdaSpace{}%
\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ*}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{∘ₛₛ}}\AgdaSpace{}%
\AgdaBound{τ*}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{η}\<%
\\
\>[0]\AgdaFunction{subst-to-env*-comp}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{Δ₁}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{τ*}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{subst-to-env*-comp}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{Δ₁}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{∷}}\AgdaSpace{}%
\AgdaBound{Δ₁}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{τ*}\AgdaSpace{}%
\AgdaBound{η}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{conglωω}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{}∷\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{sym}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-preserves}\AgdaSpace{}%
\AgdaBound{τ*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaInductiveConstructor{here}\AgdaSymbol{)))}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-to-env*-comp}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tdropₛ}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{τ*}\AgdaSpace{}%
\AgdaBound{η}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{apply-env-var}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{∈}}\AgdaSpace{}%
\AgdaGeneralizable{Δ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{apply-env}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟦}}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟧}}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\<%
\\
\>[0]\AgdaFunction{apply-env-var}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaInductiveConstructor{here}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{apply-env-var}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{there}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{apply-env-var}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tdropₛ}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{x}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{τ*∈Ren*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{τ*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TRen}\AgdaSpace{}%
\AgdaGeneralizable{Δ₁}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{TSub}\AgdaSpace{}%
\AgdaGeneralizable{Δ₂}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaFunction{TRen*}\AgdaSpace{}%
\AgdaBound{τ*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{τ*}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{∘ᵣₛ}}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{subst-to-env*}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{τ*∈Ren*}\AgdaSpace{}%
\AgdaBound{τ*}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaInductiveConstructor{here}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{apply-env-var}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{τ*}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaInductiveConstructor{here}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{τ*∈Ren*}\AgdaSpace{}%
\AgdaBound{τ*}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{there}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{τ*∈Ren*}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Tdropᵣ}\AgdaSpace{}%
\AgdaBound{τ*}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{σ*}\AgdaSpace{}%
\AgdaBound{x}\<%
\end{code}
